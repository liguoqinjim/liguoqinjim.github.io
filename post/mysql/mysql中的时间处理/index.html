<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Mysql中的时间处理 - LI的技术笔记</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Liguoqinjim" />
  <meta name="description" content="mysql里面关于时间的数据类型，一共有5种，DATE, TIME, DATETIME, TIMESTAMP, 和YEAR。
" />







<meta name="generator" content="Hugo 0.58.3" />


<link rel="canonical" href="https://liguoqinjim.cn/post/mysql/mysql%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/" />





<link rel="icon" href="https://liguoqinjim.cn/favicon.ico" />











<link rel="stylesheet" href="https://liguoqinjim.cn/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="Mysql中的时间处理" />
<meta property="og:description" content="mysql里面关于时间的数据类型，一共有5种，DATE, TIME, DATETIME, TIMESTAMP, 和YEAR。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liguoqinjim.cn/post/mysql/mysql%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/" />
<meta property="article:published_time" content="2020-05-02T19:40:27+08:00" />
<meta property="article:modified_time" content="2020-05-02T19:40:27+08:00" />
<meta itemprop="name" content="Mysql中的时间处理">
<meta itemprop="description" content="mysql里面关于时间的数据类型，一共有5种，DATE, TIME, DATETIME, TIMESTAMP, 和YEAR。">


<meta itemprop="datePublished" content="2020-05-02T19:40:27&#43;08:00" />
<meta itemprop="dateModified" content="2020-05-02T19:40:27&#43;08:00" />
<meta itemprop="wordCount" content="337">



<meta itemprop="keywords" content="mysql," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mysql中的时间处理"/>
<meta name="twitter:description" content="mysql里面关于时间的数据类型，一共有5种，DATE, TIME, DATETIME, TIMESTAMP, 和YEAR。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-113128130-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="https://liguoqinjim.cn/" class="logo">LI的技术笔记</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://liguoqinjim.cn/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://github.com/liguoqinjim" rel="noopener" target="_blank">
              Works
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://liguoqinjim.cn/tags/">Tags</a>
          
        
      </li>
    

    
  </ul>
</nav>


  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="https://liguoqinjim.cn/" class="logo">
    
      LI的技术笔记
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://liguoqinjim.cn/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://github.com/liguoqinjim" rel="noopener" target="_blank">
              Works
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://liguoqinjim.cn/tags/">Tags</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Mysql中的时间处理</h1>
      
      <div class="post-meta">
        <time datetime="2020-05-02" class="post-time">
          2020-05-02
        </time>
        
        

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#date"><code>date</code></a></li>
<li><a href="#datetime-fsp"><code>datetime[(fsp)]</code></a>
<ul>
<li><a href="#sql实例">sql实例</a></li>
</ul></li>
<li><a href="#timestamp-fsp"><code>timestamp[(fsp)]</code></a>
<ul>
<li><a href="#sql实例-1">sql实例</a></li>
</ul></li>
<li><a href="#time-fsp"><code>time[(fsp)]</code></a></li>
<li><a href="#year-4"><code>year[(4)]</code></a></li>
<li><a href="#timestamp和datetime的异同">timestamp和datetime的异同</a>
<ul>
<li><a href="#相同之处">相同之处</a></li>
<li><a href="#不同之处">不同之处</a>
<ul>
<li><a href="#1-范围不同">1.范围不同</a></li>
<li><a href="#2-保存方式不同">2.保存方式不同</a></li>
<li><a href="#sql对比">sql对比</a></li>
</ul></li>
</ul></li>
<li><a href="#时区的设置">时区的设置</a>
<ul>
<li><a href="#查看当前的时区">查看当前的时区</a></li>
<li><a href="#修改当前连接时区">修改当前连接时区</a></li>
<li><a href="#修改全局时区">修改全局时区</a></li>
<li><a href="#查看效果">查看效果</a></li>
</ul></li>
<li><a href="#查询">查询</a>
<ul>
<li><a href="#2020年的订购总数">2020年的订购总数</a></li>
<li><a href="#20200101到20200229的订单">20200101到20200229的订单</a></li>
<li><a href="#返回订单的时候-给定datetime格式">返回订单的时候，给定datetime格式</a></li>
</ul></li>
<li><a href="#function">function</a></li>
<li><a href="#数据格式转换">数据格式转换</a></li>
<li><a href="#参考资料">参考资料</a></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>mysql里面关于时间的数据类型，一共有5种，<code>DATE</code>, <code>TIME</code>, <code>DATETIME</code>, <code>TIMESTAMP</code>, 和<code>YEAR</code>。</p>

<h1 id="date"><code>date</code></h1>

<p>只保存日期，范围从<code>1000-01-01</code>到<code>9999-12-31</code>。</p>

<h1 id="datetime-fsp"><code>datetime[(fsp)]</code></h1>

<p>保存日期和时间，范围从<code>1000-01-01 00:00:00.000000</code>到<code>9999-12-31 23:59:59.999999</code>。
fsp的范围是从0到6，默认是0，用来指定小数秒的精度(fractional seconds precision)。</p>

<h2 id="sql实例">sql实例</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">设置时区</span>
<span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span>time_zone <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;+8:00&#39;</span>;

<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> t_log_1
(
    id       int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
    message  varchar(<span style="color:#ae81ff">32</span>)       <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;日志内容&#39;</span>,
    log_time datetime <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> NOW() <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;日志记录时间&#39;</span>
);

<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t_log_1(message, log_time)
<span style="color:#66d9ef">values</span> (<span style="color:#e6db74">&#39;0&#39;</span>, <span style="color:#ae81ff">0</span>)
     , (<span style="color:#e6db74">&#39;20200502&#39;</span>, <span style="color:#e6db74">&#39;20200502&#39;</span>)
     , (<span style="color:#e6db74">&#39;2020-05-02&#39;</span>, <span style="color:#e6db74">&#39;2020-05-02&#39;</span>)
     , (<span style="color:#e6db74">&#39;2020-05-02 19:56:09&#39;</span>, <span style="color:#e6db74">&#39;2020-05-02 19:56:09&#39;</span>)
     , (<span style="color:#e6db74">&#39;2020-05-02 19-56-09&#39;</span>, <span style="color:#e6db74">&#39;2020-05-02 19-56-09&#39;</span>)
     , (<span style="color:#e6db74">&#39;20200502195609&#39;</span>, <span style="color:#e6db74">&#39;20200502195609&#39;</span>)
     , (<span style="color:#e6db74">&#39;1970-01-01 00:00:01.000000&#39;</span>, <span style="color:#e6db74">&#39;1970-01-01 00:00:01.000000&#39;</span>)
     , (<span style="color:#e6db74">&#39;from_unixtime(1588427123)&#39;</span>, from_unixtime(<span style="color:#ae81ff">1588427123</span>));
<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">格式错误</span>
<span style="color:#f92672">#</span>      , (<span style="color:#e6db74">&#39;202005021956&#39;</span>, <span style="color:#e6db74">&#39;202005021956&#39;</span>)<span style="color:#f92672">#</span>error
<span style="color:#f92672">#</span>      , (<span style="color:#e6db74">&#39;2020050219&#39;</span>, <span style="color:#e6db74">&#39;2020050219&#39;</span>)<span style="color:#f92672">#</span> error
<span style="color:#f92672">#</span>      , (<span style="color:#e6db74">&#39;2020-05-02 195609&#39;</span>,<span style="color:#e6db74">&#39;2020-05-02 195609&#39;</span>)<span style="color:#f92672">#</span>error

<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_log_1;</code></pre></div>
<p><img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_22-46-47.jpg" alt="datetime查询结果" /></p>

<h1 id="timestamp-fsp"><code>timestamp[(fsp)]</code></h1>

<p>保存时间戳，范围从<code>'1970-01-01 00:00:01.000000' UTC</code>到<code>'2038-01-19 03:14:07.999999' UTC</code>。<br />
fsp的范围是从0到6，默认是0，用来指定小数秒的精度(fractional seconds precision)。</p>

<h2 id="sql实例-1">sql实例</h2>

<p>和datetime类似</p>

<h1 id="time-fsp"><code>time[(fsp)]</code></h1>

<p>保存的时间长度，范围从<code>-838:59:59.000000</code>到<code>838:59:59.000000</code>。<br />
fsp的范围是从0到6，默认是0，用来指定小数秒的精度(fractional seconds precision)。</p>

<h1 id="year-4"><code>year[(4)]</code></h1>

<p>保存年份，范围从<code>1901</code>到<code>2155</code>，或者是<code>0000</code></p>

<h1 id="timestamp和datetime的异同">timestamp和datetime的异同</h1>

<h2 id="相同之处">相同之处</h2>

<p>保存的都是日期和时间，都是<code>YYYY-MM-DD HH:MM:SS[.fraction]</code>的数据</p>

<h2 id="不同之处">不同之处</h2>

<h3 id="1-范围不同">1.范围不同</h3>

<ul>
<li>datetime的范围是<code>1000-01-01 00:00:00.000000</code>到<code>9999-12-31 23:59:59.999999</code></li>
<li>timestamp的范围是<code>1970-01-01 00:00:01.000000</code>到<code>2038-01-19 03:14:07.999999</code></li>
</ul>

<h3 id="2-保存方式不同">2.保存方式不同</h3>

<ul>
<li>timestamp会把时间先转到UTC时区，然后保存。查的时候再转换到连接的当前时区。</li>
<li>datetime就是直接存</li>
</ul>

<h3 id="sql对比">sql对比</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">设置时区到</span>UTC
<span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span>time_zone <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;+0:00&#39;</span>;
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> t_log_3
(
    id      int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
    message varchar(<span style="color:#ae81ff">32</span>)        <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;日志内容&#39;</span>,
    log_dt  datetime  <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> NOW() <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;日志记录时间datetime&#39;</span>,
    log_ti  <span style="color:#66d9ef">timestamp</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> NOW() <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;日志记录时间timestamp&#39;</span>
);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t_log_3(message, log_dt, log_ti)
<span style="color:#66d9ef">values</span> (<span style="color:#e6db74">&#39;2020-05-02 19:56:09&#39;</span>, <span style="color:#e6db74">&#39;2020-05-02 19:56:09&#39;</span>, <span style="color:#e6db74">&#39;2020-05-02 19:56:09&#39;</span>);

<span style="color:#f92672">#</span> UTC时区下查询
<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_log_3;

<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">设置时区到</span><span style="color:#f92672">+</span><span style="color:#ae81ff">8</span>:<span style="color:#ae81ff">00</span><span style="color:#960050;background-color:#1e0010">再查询</span>
<span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span>time_zone <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;+8:00&#39;</span>;
<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_log_3;</code></pre></div>
<p>UTC时区下查询：
<img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_22-56-59.jpg" alt="UTC时区下查询" /></p>

<p>+8:00时区下查询:
<img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_22-57-10.jpg" alt="+8:00时区下查询" /></p>

<h1 id="时区的设置">时区的设置</h1>

<h2 id="查看当前的时区">查看当前的时区</h2>

<p><code>show variables like '%time_zone%';</code></p>

<ul>
<li>全局：<code>select @@global.time_zone;</code></li>
<li>当前连接：<code>select @@session.time_zone;</code></li>
</ul>

<h2 id="修改当前连接时区">修改当前连接时区</h2>

<p><code>set @@time_zone = '+8:00'</code>，只有当前连接有效，重新连接之后或者别的连接都不会有这个配置</p>

<h2 id="修改全局时区">修改全局时区</h2>

<p><code>set global time_zone = '+8:00'</code>，改完之后，连接需要重新连接才能生效</p>

<h2 id="查看效果">查看效果</h2>

<p><code>SELECT TIMEDIFF(NOW(), UTC_TIMESTAMP);</code>，查看当前时间和UTC时间差多少</p>

<h1 id="查询">查询</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">订单表</span>
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> t_order
(
    id         int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
    num        int      <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;订购数量&#39;</span>,
    order_time datetime <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> NOW() <span style="color:#66d9ef">comment</span> <span style="color:#e6db74">&#39;订购时间&#39;</span>
);

<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t_order(num, order_time)
<span style="color:#66d9ef">values</span> (<span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;2019-12-30 00:00:00&#39;</span>),
       (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;2020-01-13 00:00:00&#39;</span>),
       (<span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;2020-02-13 00:00:00&#39;</span>),
       (<span style="color:#ae81ff">25</span>, <span style="color:#e6db74">&#39;2020-03-13 00:00:00&#39;</span>),
       (<span style="color:#ae81ff">35</span>, <span style="color:#e6db74">&#39;2020-03-13 00:00:00&#39;</span>);</code></pre></div>
<h2 id="2020年的订购总数">2020年的订购总数</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(num) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;total&#39;</span>, <span style="color:#66d9ef">year</span>(order_time) <span style="color:#66d9ef">as</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">year</span><span style="color:#f92672">`</span>
<span style="color:#66d9ef">from</span> t_order
<span style="color:#66d9ef">where</span> <span style="color:#66d9ef">year</span>(order_time) <span style="color:#f92672">=</span> <span style="color:#ae81ff">2020</span>;</code></pre></div>
<p><img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_23-15-20.jpg" alt="2020年的订购总数" /></p>

<h2 id="20200101到20200229的订单">20200101到20200229的订单</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span>
<span style="color:#66d9ef">from</span> t_order
<span style="color:#66d9ef">where</span> order_time <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;20200101&#39;</span>
  <span style="color:#66d9ef">and</span> order_time <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;20200229&#39;</span>;</code></pre></div>
<p><img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_23-15-38.jpg" alt="20200101到20200229的订单" /></p>

<h2 id="返回订单的时候-给定datetime格式">返回订单的时候，给定datetime格式</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> num, DATE_FORMAT(order_time, <span style="color:#e6db74">&#39;%Y%m%d %H:%i:%s&#39;</span>)
<span style="color:#66d9ef">from</span> t_order;</code></pre></div>
<p><img src="https://liguoqinjim.cn/images/mysql/Snipaste_2020-05-02_23-15-55.jpg" alt="返回订单的时候，给定datetime格式" /></p>

<h1 id="function">function</h1>

<p>这里列举主要使用的几个，更多的可以看参考资料的链接。</p>

<table>
<thead>
<tr>
<th>function</th>
<th>作用</th>
</tr>
</thead>

<tbody>
<tr>
<td>now[(6)]</td>
<td>当前时间</td>
</tr>

<tr>
<td>year()</td>
<td>返回年份</td>
</tr>

<tr>
<td>DATE_FORMAT()</td>
<td>时间格式</td>
</tr>

<tr>
<td>FROM_UNIXTIME()</td>
<td>时间戳转为时间</td>
</tr>

<tr>
<td>UNIX_TIMESTAMP()</td>
<td>时间转为时间戳</td>
</tr>
</tbody>
</table>

<h1 id="数据格式转换">数据格式转换</h1>

<ul>
<li>datetime(timestamp)转为date，<code>CAST(datetime_col AS DATE)</code></li>
<li>datetime(timestamp)转为数字，直接+0即可，<code>SELECT NOW(), NOW()+0, NOW(3)+0;</code></li>
</ul>

<h1 id="参考资料">参考资料</h1>

<ul>
<li><a href="https://www.cnblogs.com/jie-fang/p/10279439.html">mysql时区设置</a></li>
<li><a href="https://stackoverflow.com/questions/930900/how-do-i-set-the-time-zone-of-mysql">mysql时区设置</a></li>
<li><a href="https://www.cnblogs.com/ivictor/p/5028368.html">datetime和timestamp的区别</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-type-syntax.html">mysql文档</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html">mysql中关于时间的函数</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format">mysql日期格式化</a></li>
</ul>
    </div>

    
    


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://liguoqinjim.cn/tags/mysql/">mysql</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="https://liguoqinjim.cn/post/mysql/windows%E5%AE%89%E8%A3%85mysql/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">Windows安装mysql</span>
            <span class="prev-text nav-mobile"></span>
          </a>
        
          <a class="next" href="https://liguoqinjim.cn/post/golang/golang%E9%A1%B9%E7%9B%AE%E6%8E%A5%E5%85%A5travis-ci/">
            <span class="next-text nav-default">Golang项目接入Travis CI</span>
            <span class="prev-text nav-mobile"></span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = "https://liguoqinjim.cn/post/mysql/mysql%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/";
    };
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'liguoqinjim';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  


<a href="https://liguoqinjim.cn/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
       -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        © This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you wish to quote or reproduce.
        
      </span></span>

  
  

  
    <span>
      <a href='http://www.beian.miit.gov.cn'>沪ICP备19042199号-1</a>
    </span>
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="https://liguoqinjim.cn/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="https://liguoqinjim.cn/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="https://liguoqinjim.cn/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>


























</body>
</html>
